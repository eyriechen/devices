<html>
<head>
	<script src="jquery.min.js"></script>
	<script type="text/javascript">
		$('document').ready(function(){
			update_table();
			//setInterval(update_table, 100); 
		});
		function update_table(){
			$('tr').each(function(){
				var id = $(this).attr('id');
				var since_date  = new Date($('#'+id+' .since').html());
				var end_date = new Date();
				var spend = $('#'+id+' .spend').html();
				var result = $('#'+id+' .result').html();
				if(result){
					end_date = new Date(result.split('on')[1].split(':')[0]);
					spend = spend - result.split('on')[1].split(':')[1];
				}
				var age = ((end_date - since_date)/3600/24/1000).toFixed(0);
				$('#'+id+' .age').html(age);
				$('#'+id+' .daily').html((spend/age).toFixed(2));
			});
		}

	</script>
	<style type="text/css">
		.daily{
			text-align: right;
		}
		.age{
			text-align: right;
		}
		.device_image{
			text-align: center;
		}
	</style>
</head>
<body>
<table id="devices">
	<thead>
		<th></th>
		<th>Device</th>
		<th>Brought Date</th>
		<th>Spend</th>
		<th>Age(Days)</th>
		<th>Ending</th>
		<th>Daily Spend</th>
	</thead>
	<tr id="1">
		<td class="device_image"><img src="images/iphone5c-selection-blue-2013.png" height="150"/></td><td>iPhone 5c</td><td class="since">October 5, 2013 </td><td class="spend">3650</td><td class="age"></td><td class="result"></td><td class="daily"></td>
	</tr>
	<tr id="2">
		<td class="device_image"><img src="images/dell_u2312hm.jpg" height="150"/></td><td>Dell U2312HM</td><td class="since">June 7, 2013 </td><td class="spend">1388</td><td class="age"></td><td class="result"></td><td class="daily"></td>
	</tr>
	<tr id="3">
		<td class="device_image"><img src="images/2012-iphone5-select-white.png" height="150"/></td><td>iPhone 5</td><td class="since">February 20, 2013 </td><td class="spend">4988</td><td class="age"></td><td class="result"></td><td class="daily"></td>
	</tr>
	<tr id="4">
		<td class="device_image"><img src="images/ipad.png" height="150"/></td><td>iPad 3</td><td class="since">August 14, 2012 </td><td class="spend">3688</td><td class="age"></td><td class="result">Sold on August 6, 2013: 1800</td><td class="daily"></td>
	</tr>
	<tr id="5">
		<td class="device_image"><img src="images/galaxy_nexus.png" height="150"/></td><td>Galaxy Nexus</td><td class="since">August 12, 2012 </td><td class="spend">2430</td><td class="age"></td><td class="result">Retired on October 5, 2013:0</td><td class="daily"></td>
	</tr>
	<tr id="6">
		<td class="device_image"><img src="images/mba2012-step1-macbookair-13in.png" height="150"/></td><td>Macbook Air</td><td class="since">August 2, 2012 </td><td class="spend">8888</td><td class="age"></td><td class="result"></td><td class="daily"></td>
	</tr>
</table>
</body>
</html>
